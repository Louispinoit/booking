{% extends 'base.html.twig' %}

{% block title %}Avis du livre {{ bookId }} - BliblHiTech{% endblock %}

{% block body %}
<div class="example-wrapper">

<h1 class="text-2xl font-bold mb-4">Avis du livre {{ bookId }}</h1>

    {% for review in reviews %}
        <div class="bg-white shadow-md rounded-md p-4 mb-4">
            <div class="flex items-center mb-2">
                <p class="text-lg font-semibold">{{ review.idUser }}</p>
                <div class="ml-auto">
                    <div class="flex items-center"></div>
                </div>
            </div>
            <p class="text-gray-700 mb-2">{{ review.comment }}</p>
            <div class="flex items-center">
                <p class="mr-2 text-gray-500">{{ review.notation }}/5 </p>
                <div class="mr-2 flex">
                    {% set rating = review.notation %}
                    {% for i in range(1, 5) %}
                        <svg xmlns="http://www.w3.org/2000/svg"
                             fill="{% if i <= rating %}currentColor{% else %}none{% endif %}" viewBox="0 0 24 24"
                             stroke="currentColor" class="w-6 h-6">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                  d="M5.293 5.293a1 1 0 011.414 0l2.829 2.829a1 1 0 001.414 0L14 5.586a1 1 0 011.414 0l2.829 2.829a1 1 0 000 1.414L19.414 14a1 1 0 010 1.414l2.829 2.829a1 1 0 000 1.414l-2.829 2.829a1 1 0 01-1.414 0L14 19.414a1 1 0 01-1.414 0l-2.829-2.829a1 1 0 00-1.414 0L5.586 19a1 1 0 01-1.414 0L1.343 16.171a1 1 0 000-1.414L4.172 12a1 1 0 010-1.414L1.343 8.757a1 1 0 000-1.414L4.172 5.171a1 1 0 011.414 0z"/>
                        </svg>
                    {% endfor %}
                </div>
            </div>
        </div>
    {% endfor %}

    {{ form_start(OpinionForm) }}
    <div class="mb-4">
        {{ form_row(OpinionForm.comment, {'attr': {'class': 'w-full border border-gray-300 rounded py-2 px-4'}}) }}
    </div>
    <div class="mb-4">
        {{ form_row(OpinionForm.notation, {'attr': {'class': 'w-full border border-gray-300 rounded py-2 px-4'}}) }}
    </div>
    <button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded w-full">
        Envoyer
    </button>
    {{ form_end(OpinionForm) }}


    <a href="{{ path('app_home') }}" class="fixed top-4 left-4 bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">Retour</a>
</div>
{% endblock %}
